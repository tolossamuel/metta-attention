!(register-module! ../../../metta-attention)
!(import! &self metta-attention:attention-bank:utilities:helper-functions)
!(import! &self metta-attention:attention-bank:attention-value:getter-and-setter)
!(import! &self metta-attention:attention-bank:bank:atombins)
!(import! &self metta-attention:attention-bank:bank:attention-bank)
!(import! &self metta-attention:attention-bank:bank:attentional-focus)

; Test attentional focus
!(setAv A (100 200 300))
!(setAv B (50 150 250))
!(setAv C (200 300 400))
!(setAv D (25 125 225))
!(setAv F (70 100 200))
!(addAtomToAF A)
!(addAtomToAF B)
!(addAtomToAF C)
!(addAtomToAF D)
!(addAtomToAF F)
!(assertEqual(attentionalFocusSize) 5)
!(assertEqual(atomIsInAF C) True)
!(assertEqual (sortAtomsBySti  (getAtomList)) (D B F A C))
!(assertEqual (getLowestStiAtomInAF) D)
!(setAv G (300 400 500))
!(updateAttentionalFocus G) 
!(assertEqual (getAtomList) (A B C D F G))
!(setAv H (15 25 35))
!(updateAttentionalFocus H) 
!(assertEqual (getAtomList) (A B C D F G H))
!(setAv I (500 600 700))
!(updateAttentionalFocus I) 
!(setAv A (600 200 300))
!(updateAttentionalFocus A)
!(assertEqual (updateAttentionalFocus L) (Atom is not valid))
!(assertEqual (getAtomList) (A B C D F G H I))
!(assertEqual (sortAtomsBySti  (getAtomList)) (H D B F C G I A))
